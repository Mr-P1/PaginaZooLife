<div class="card bg-gray-100 shadow-md rounded-lg p-6">
  <div class="card-body">
    <h5 class="card-title text-xl font-semibold text-gray-800 mb-4">
      Generar Boleta y QR
    </h5>

    <!-- Contenedor del QR -->
    <div
      #qrcode
      class="qr-placeholder flex items-center justify-center mb-6 p-4 bg-white shadow rounded-lg"
      [ngClass]="{ 'qr-generated': qrGenerado }"
    >
      <qrcode
        *ngIf="qrGenerado"
        [qrdata]="qrData"
        [width]="256"
        [errorCorrectionLevel]="'M'"
      ></qrcode>
      <p *ngIf="!qrGenerado" class="text-gray-500">
        QR no generado a√∫n
      </p>
    </div>

    <!-- Select de usuarios -->
    <div *ngIf="qrGenerado" class="mb-6">
      <label for="usuarioSelect" class="block text-gray-700 font-medium mb-2">
        Seleccione un usuario para enviar el QR:
      </label>
      <select
        id="usuarioSelect"
        [(ngModel)]="correoSeleccionado"
        class="w-full bg-gray-50 border border-gray-300 text-gray-700 py-2 px-4 rounded-lg shadow focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
      >
        <option
          *ngFor="let usuario of usuarios"
          [value]="usuario.correo"
          class="text-gray-700"
        >
         Nombre del Usuario: {{usuario.nombre }}, Correo {{ usuario.correo }}
        </option>
      </select>
    </div>

    <!-- Acciones -->
    <div class="actions flex flex-wrap gap-4">
      <button
        (click)="generarQr()"
        class="bg-indigo-600 text-white py-2 px-4 rounded-lg shadow hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
      >
        Generar QR
      </button>
      <a [href]="qrCodeDownloadLink" download="qrcode.png">
        <button
          [disabled]="!qrGenerado"
          class="bg-gray-300 text-gray-700 py-2 px-4 rounded-lg shadow hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Descargar QR
        </button>
      </a>
      <button
        (click)="sendEmail(correoSeleccionado)"
        [disabled]="!qrGenerado"
        class="bg-green-600 text-white py-2 px-4 rounded-lg shadow hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Mandar Correo
      </button>
    </div>
  </div>
</div>
